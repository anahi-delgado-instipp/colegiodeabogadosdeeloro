{% extends 'layouts/base.html' %}
{% load static %}

{% block title %} Perfil {% endblock title %}

{% block content %}

<!-- HEADER -->
<!-- HEADER -->
{% if request.user.perfil.foto %}
<div class="header pb-6 d-flex align-items-center" style="min-height: 500px;
            background-image: url('{{ request.user.perfil.foto.url }}');
            background-size: cover;
            background-position: center;">
  {% else %}
  <div class="header pb-6 d-flex align-items-center" style="min-height: 500px;
            background-image: url('{% static " assets/img/theme/profile-cover.jpg" %}'); background-size: cover;
    background-position: center;">
    {% endif %}

    <span class="mask bg-gradient-default opacity-8"></span>

    <div class="container-fluid d-flex align-items-center">
      <div class="row">
        <div class="col-lg-7 col-md-10">
          <h1 class="display-2 text-white">
            Hola, {{ request.user.first_name }} {{ request.user.last_name }}
          </h1>
          <p class="text-white mt-0 mb-5">
            Esta es tu página de perfil. Puedes editar tu información personal aquí.
          </p>
        </div>
      </div>
    </div>
  </div>
<br>

  <!-- FORMULARIO -->
  <div class="col-xl-8 order-xl-1; justify-content-center mx-auto mb-5">
    <div class="card">
      <div class="card-header">
        <h3 class="mb-0">Editar perfil</h3>
      </div>

      <div class="card-body">
        <form method="POST" enctype="multipart/form-data">
          {% csrf_token %}

          <h6 class="heading-small text-muted mb-4">Datos del usuario</h6>

          <div class="row">
            <div class="col-lg-6">
              <label>Usuario</label>
              <input type="text" class="form-control" value="{{ request.user.username }}" disabled>
            </div>

            <div class="col-lg-6">
              <label>Email</label>
              <input type="email" name="email" class="form-control" value="{{ request.user.email }}">
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-lg-6">
              <label>Nombres</label>
              <input type="text" name="first_name" class="form-control" value="{{ request.user.first_name }}">
            </div>

            <div class="col-lg-6">
              <label>Apellidos</label>
              <input type="text" name="last_name" class="form-control" value="{{ request.user.last_name }}">
            </div>
          </div>

          <hr class="my-4">

          <h6 class="heading-small text-muted mb-4">Información de contacto</h6>

          <div class="row">
            <div class="col-md-6">
              <label>Teléfono</label>
              <input type="text" name="telefono" class="form-control" value="{{ request.user.perfil.telefono }}">
            </div>

            <div class="col-md-6">
              <label>Cédula</label>
              <input type="text" name="cedula" class="form-control" value="{{ request.user.perfil.cedula }}">
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-md-12">
              <label>Dirección</label>
              <input type="text" name="direccion" class="form-control" value="{{ request.user.perfil.direccion }}">
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-md-6">
              <label>Fecha de nacimiento</label>
              <input type="date" name="fecha_nacimiento" class="form-control"
                value="{{ request.user.perfil.fecha_nacimiento|date:'Y-m-d' }}">
            </div>

            <div class="col-md-6">
              <label>Foto de perfil</label>
              <input type="file" name="foto" class="form-control">
            </div>

          <div class="text-right mt-4">
            <button type="submit" class="btn btn-primary">
              Guardar cambios
            </button>
          </div>

        </form>
      </div>
    </div>
  </div>

</div>

{% include "includes/footer.html" %}
</div>

{% endblock content %}
